
# 1ï¸âƒ£ é—®é¢˜é™ˆè¿°
## 1ï¸âƒ£.1ï¸âƒ£ éœ€è¦è§£å†³çš„é—®é¢˜
&emsp;&emsp;ç›®å‰åœ°é“ä¸€èˆ¬é‡‡ç”¨å¦‚ä¸‹çš„**å•ä¸€äº¤è·¯**
ï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/2020051300111441.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center)ç›®å‰ï¼Œæˆ‘å›½ç»å¤§å¤šæ•°åŸå¸‚éƒ½é‡‡ç”¨è¿™ç§äº¤è·¯å½¢å¼ï¼Œä½†æ˜¯å½“æ–­é¢å®¢æµé‡åˆ†å¸ƒä¸å‡åŒ€æ—¶å®¹æ˜“é€ æˆçº¿è·¯è¿èƒ½æµªè´¹ï¼Œå®¢æµæ‹¥æŒ¤ã€‚

æ›¿ä»£æ–¹æ¡ˆå°±æ˜¯ç”¨**å¤§å°äº¤è·¯**ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200513001301994.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200513001308221.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center)
ä½¿ç”¨é—ä¼ ç®—æ³•ç¨‹åºå°±æ˜¯åœ¨æ—¢å®šçš„ODçŸ©é˜µä¸‹æ‰¾åˆ°æœ€ä¼˜çš„å¤§å°äº¤è·¯çš„å¾€è¿”ç«™$S_a,S_b$ä»¥åŠç›¸åº”çš„å¤§å°äº¤è·¯çš„å‘è½¦é¢‘ç‡$f_1,f_2$ï¼Œä¹Ÿå°±æ˜¯åœ¨é—ä¼ ç®—æ³•æ¯æ¬¡è¿è¡Œä¸­ï¼Œæ ¹æ®ä¸åŒçš„å¤§å°äº¤è·¯æŠ˜è¿”ç«™çš„è®¾ç½®ï¼Œåˆ’åˆ†é¢„å®šçš„ODå‡ºè¡ŒçŸ©é˜µï¼Œç„¶åè®¡ç®—ç›®æ ‡å‡½æ•°ï¼Œåˆ¤æ–­æ˜¯å¦è¾¾åˆ°æœ€ä¼˜ã€‚

## 1ï¸âƒ£.2ï¸âƒ£ å˜é‡å®šä¹‰
- $Q_1$â€”â€”å‡ºè¡Œ$O$ç‚¹æˆ–$D$ç‚¹ä½äºå°äº¤è·¯è¦†ç›–åŒºæ®µå¤–å‡ºè¡Œä»¥åŠ$OD$å‡ä½äºå°äº¤è·¯è¦†ç›–åŒºæ®µå¤–çš„å®¢æµé‡ï¼Œäººï¼›
- $Q_2$â€”â€”å‡ºè¡Œ$OD$ä½äºå°äº¤è·¯è¦†ç›–åŒºæ®µçš„å®¢æµé‡ï¼Œäººï¼›
- $t_{1d}ã€t_{2d}$â€”â€”$Q_1ã€Q_2$å¯¹åº”ä¹˜å®¢çš„å¹³å‡å€™è½¦æ—¶é—´ï¼Œ$s$;
- $q_{od}$â€”â€”åœ¨è½¦ç«™$o$ä¸Šè½¦ï¼Œåœ¨è½¦ç«™$d$ä¸‹è½¦çš„å®¢æµé‡ï¼Œäººï¼›
- $i$â€”â€”åˆ—è½¦äº¤è·¯çš„é›†åˆï¼Œ$i=\{1,2\}$ï¼Œ$1$ä»£è¡¨å¤§äº¤è·¯ï¼Œ$2$ä»£è¡¨å°äº¤è·¯ï¼›
- $f_i$â€”â€”å¤§å°äº¤è·¯è¿è¡Œæ–¹å¼ä¸‹çš„äº¤è·¯içš„å‘è½¦é¢‘ç‡ï¼Œå¯¹/å°æ—¶ï¼›
- $f$â€”â€”å•ä¸€äº¤è·¯è¿è¡Œæ–¹å¼ä¸‹çš„å‘è½¦é¢‘ç‡ï¼Œå¯¹/å°æ—¶ï¼›
- $f_{min}$â€”â€”æœ€å°å‘è½¦é¢‘ç‡ï¼Œè®¾ç½®ä¸º$12$å¯¹/å°æ—¶ï¼›
- $T_{1å‘¨}ã€T_{2å‘¨}$â€”â€”å¤§å°äº¤è·¯åˆ—è½¦å‘¨è½¬æ—¶é—´ï¼Œ$s$;
- $t_{è¿,j}$â€”â€”åˆ—è½¦åœ¨åŒºé—´$j$çš„çº¯è¿è¡Œæ—¶é—´ï¼Œ$s$ï¼›
- $t_{åœ,j}$â€”â€”åˆ—è½¦åœ¨è½¦ç«™$h$çš„åœç«™æ—¶é—´ï¼Œ$s$ï¼Œè®¾ç½®ä¸º$30s$ï¼›
- $t_{æŠ˜}$â€”â€”åˆ—è½¦åœ¨ç»ˆç‚¹ç«™ã€ä¸­é—´ç«™çš„æœ€å°æŠ˜è¿”é—´éš”æ—¶é—´ï¼Œ$s$ï¼Œè®¾ç½®ä¸º$120s$;
- $C_z$â€”â€”åˆ—è½¦å®šå‘˜ï¼Œå³æ ‡å‡†è½½å®¢äººæ•°ï¼Œäººï¼Œè®¾ç½®ä¸º$1460$ï¼›
- $\alpha$â€”â€”åˆ—è½¦æ»¡è½½ç‡ä¸Šé™ï¼Œè®¾ç½®ä¸º100%ï¼›
- $I_o$â€”â€”åˆ—è½¦æœ€å°è¿½è¸ªé—´éš”ï¼Œ$s$ï¼Œè®¾ç½®ä¸º$120s$;
## 1ï¸âƒ£.3ï¸âƒ£ ç›®æ ‡å‡½æ•°
$$\min _{Z}=Q_{1} \cdot t_{1 d}+Q_{2} \cdot t_{2 d}$$
å…¶ä¸­
$$Q_{1}=\sum_{d=1}^{n} \sum_{o=1}^{n} q_{o d}-Q_{2}\\Q_{2=} \sum_{d=o+1}^{b} \sum_{o=a}^{b-1} q_{o, d}+\sum_{d=a}^{o-1} \sum_{o=a+1}^{b} q_{o, d}$$
$$t_{2 d}=\frac{1}{2} \cdot \frac{60}{f_{1}+f_{2}}\\ \\t_{1 d}=\frac{1}{2} \cdot \frac{60}{f}$$

## 1ï¸âƒ£.4ï¸âƒ£ çº¦æŸæ¡ä»¶
- åˆ—è½¦æ•°é‡
$$\left[\frac{T_{\text {å‘¨1}}}{60} \cdot f_{1}\right]+\left[\frac{T_{\text {å‘¨} 2}}{60} \cdot f_{2}\right] \leq\left[\frac{T_{\text {å‘¨} 1}}{60} \cdot f\right]$$
å…¶ä¸­
$$T_{\text {å‘¨} 1}=2 \cdot\left(\sum_{j=1}^{n-1} t_{\text {è¿}},_{j}+\sum_{h=1}^{n} t_{\text {åœ, } h}+\sum t_{\text {æŠ˜}}\right)\\T_{\text {å‘¨} 2}=2 \cdot\left(\sum_{j=a}^{b-1} t_{\text {è¿}},_{j}+\sum_{h=a}^{b} t_{\text {åœ, } h}+\sum t^{'}_{\text {æŠ˜}}\right)$$

- æ»¡è½½ç‡çº¦æŸ
$$\max _{j}\left(\sum_{d=j+1}^{n} \sum_{o=1}^{j} q_{o d} / \sum_{i=1}^{2} f_{i} \cdot \sum_{d=1}^{j} \sum_{o=j+1}^{n} q_{o d} / \sum_{i=1}^{2} f_{i}\right) \leq \alpha \cdot C_z$$

- æ»¡è¶³æœ€å°è¿½è¸ªé—´éš”
$$f_{1}+f_{2} \leq \frac{3600}{I_{0}}$$

- æŠ˜è¿”ç«™æŠ˜è¿”èƒ½åŠ›
$$f_1\le\frac{3600}{t_{æŠ˜}}\\f_2\le\frac{3600}{t_æŠ˜}$$

- æ»¡è¶³æœ€å°å‘è½¦é¢‘ç‡
$$f_1>=f_{min}$$

- å…¶ä»–çº¦æŸ
$$f_i\in N\\ 1\le a<b\le n$$

# 2ï¸âƒ£ `MATLAB`ç¨‹åº
æ‰€æœ‰çš„ç¨‹åºä»¥åŠæ•°æ®ï¼ŒODå‡ºè¡ŒçŸ©é˜µä»¥åŠåŒºé—´è¿è¡Œæ—¶é—´åœ¨ï¼š[åˆ—è½¦äº¤è·¯æ–¹æ¡ˆä¼˜åŒ–é—ä¼ ç®—æ³•ç¨‹åº](https://github.com/ExcaliburEX/Graduation-Design-and-MATLAB-Code-/tree/master/%E5%88%97%E8%BD%A6%E4%BA%A4%E8%B7%AF%E6%96%B9%E6%A1%88%E4%BC%98%E5%8C%96%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E7%A8%8B%E5%BA%8F)

## 2ï¸âƒ£.1ï¸âƒ£ `myself.m`â€”â€”ä¸»è„šæœ¬
ä¸»è„šæœ¬ï¼Œ`OD`çŸ©é˜µå¯ä»¥ä½¿ç”¨`od.m`è„šæœ¬éšæœºç”Ÿæˆã€‚
```python
clear;clc;close all;

%% ç”ŸæˆéšæœºODçŸ©é˜µ
%od()

%%é—ä¼ å‚æ•°è®¾ç½®
NUMPOP=200;%åˆå§‹ç§ç¾¤å¤§å°
irange_l=1; %é—®é¢˜è§£åŒºé—´
irange_r=35; 
LENGTH=24; %äºŒè¿›åˆ¶ç¼–ç é•¿åº¦
ITERATION = 10000;%è¿­ä»£æ¬¡æ•°
CROSSOVERRATE = 0.8;%æ‚äº¤ç‡
SELECTRATE = 0.4;%é€‰æ‹©ç‡
VARIATIONRATE = 0.2;%å˜å¼‚ç‡
OD = xlsread('OD.xlsx');% è‹å·åœ°é“2å·çº¿è°ƒæŸ¥é—®å·ODå‡ºè¡ŒçŸ©é˜µ
h = xlsread('åŒºé—´è¿è¡Œæ—¶é—´.xlsx'); % è‹å·åœ°é“2å·çº¿åŒºé—´é•¿åº¦åŠè¿è¡Œæ—¶åˆ†

%åˆå§‹åŒ–ç§ç¾¤
pop=m_InitPop(NUMPOP,irange_l,irange_r);
pop_save=pop;
fitness_concat = [];
best_solution = [];
%å¼€å§‹è¿­ä»£
for time=1:ITERATION
    %è®¡ç®—åˆå§‹ç§ç¾¤çš„é€‚åº”åº¦
    fitness=m_Fitness(pop, OD, h);
    fitness_concat = [fitness_concat;max(fitness)];
    pop_T = pop';
    [m,index] = max(m_Fitness(pop, OD, h));
   best_solution = [best_solution;pop(:,index)'];
    %é€‰æ‹©
    pop=m_Select(fitness,pop,SELECTRATE);
    %ç¼–ç 
    binpop=m_Coding(pop,LENGTH,irange_l);
    %äº¤å‰
    kidsPop = crossover(binpop,NUMPOP,CROSSOVERRATE);
    %å˜å¼‚
    kidsPop = Variation(kidsPop,VARIATIONRATE);
    %è§£ç 
    kidsPop=m_Incoding(kidsPop,irange_l);
    %æ›´æ–°ç§ç¾¤
    pop=[pop kidsPop];
end

disp(['æœ€ä¼˜è§£ï¼š' num2str(min(m_Fx(pop,OD))) 'åˆ†é’Ÿ']);
disp(['æœ€ä¼˜è§£å¯¹åº”çš„å„å‚æ•°ï¼š' num2str(pop(1,1)) ',' num2str(pop(2,1)) ',' num2str(pop(3,1)) ',' num2str(pop(4,1)) ]);
disp(['æœ€å¤§é€‚åº”åº¦ï¼š' num2str(max(m_Fitness(pop, OD, h)))]);   
    
figure
% set(gca,'looseInset',[0 0 0 0]);
set(gcf,'outerposition',get(0,'screensize'));
loglog(1:ITERATION, fitness_concat, 'Blue*-','linewidth',2)
legend('{\bfæœ€ä¼˜é€‚åº”åº¦å€¼}');
xlabel('{\bfè¿›åŒ–ä»£æ•°}','fontsize',30);
ylabel('{\bfæœ€ä¼˜é€‚åº”åº¦}','fontsize',30);
set(gca,'FontSize',20,'Fontname', 'Times New Roman');
set(get(gca,'XLabel'),'Fontsize',20,'Fontname', 'å®‹ä½“');
set(get(gca,'YLabel'),'Fontsize',20,'Fontname', 'å®‹ä½“');
set(get(gca,'legend'),'Fontsize',20,'Fontname', 'å®‹ä½“');
set(get(gca,'title'),'Fontsize',20,'Fontname', 'å®‹ä½“');
set(gca,'linewidth',2); 
print(gcf,'-dpng','-r300','æœ€ä¼˜é€‚åº”åº¦å€¼-è¿›åŒ–ä»£æ•°');

figure
% set(gca,'looseInset',[0 0 0 0]);
set(gcf,'outerposition',get(0,'screensize'));
semilogx(1 : ITERATION, best_solution,'linewidth',4)
legend('{\bfå¤§å°äº¤è·¯æŠ˜è¿”ç«™a}','{\bfå¤§å°äº¤è·¯æŠ˜è¿”ç«™b}','{\bfå¤§äº¤è·¯å‘è½¦é¢‘ç‡f_1}','{\bfå°äº¤è·¯å‘è½¦é¢‘ç‡f_2}');
% text(6, 0.3, '$\leftarrow  y= 2^{-x}$', 'HorizontalAlignment', 'left', 'Interpreter', 'latex', 'FontSize', 15);
xlabel('{\bfè¿›åŒ–ä»£æ•°}','fontsize',15);
ylabel('{\bfå‚æ•°å„ä»£æœ€ä¼˜å€¼}','fontsize',15);
set(gca,'FontSize',20,'Fontname', 'Times New Roman');
set(get(gca,'XLabel'),'Fontsize',20,'Fontname', 'å®‹ä½“');
set(get(gca,'YLabel'),'Fontsize',20,'Fontname', 'å®‹ä½“');
set(get(gca,'legend'),'Fontsize',20,'Fontname', 'å®‹ä½“');
set(get(gca,'title'),'Fontsize',20,'Fontname', 'å®‹ä½“');
set(gca,'linewidth',2); 
print(gcf,'-dpng','-r300','å‚æ•°å„ä»£æœ€ä¼˜å€¼-è¿›åŒ–ä»£æ•°');

```
## 2ï¸âƒ£.2ï¸âƒ£ `od.m`â€”â€”ç”Ÿæˆéšæœºå‡ºè¡Œ`OD`çŸ©é˜µ
ç”¨æ¥ç”Ÿæˆéšæœºå‡ºè¡Œ`OD`çŸ©é˜µã€‚

```python
Mu = 26;
sigma = 10;
N = round(normrnd(Mu, sigma, [35 35]));
N = N + abs(min(N));
sum(sum(N))
if sum(sum(N)) > 35000 ;
    if sum(sum(N)) < 40000;
        xlswrite('test.xlsx',N,'Sheet1')
    end
end
```

## 2ï¸âƒ£.3ï¸âƒ£ `m_InitPop.m`â€”â€”åˆå§‹åŒ–ç§ç¾¤

```python
function pop=m_InitPop(numpop,irange_l,irange_r)
%% åˆå§‹åŒ–ç§ç¾¤
%  è¾“å…¥ï¼šnumpop--ç§ç¾¤å¤§å°ï¼›
%       [irange_l,irange_r]--åˆå§‹ç§ç¾¤æ‰€åœ¨çš„åŒºé—´
pop=[];
for j = 1:numpop
    for i=1:4
        % å› ä¸ºa,b,f1,f2è¦æ±‚æ•´æ•°ï¼Œæ‰€ä»¥ç”Ÿæˆéšæœºæ•´æ•°
        pop(i,j)= round(irange_l+(irange_r-irange_l)*rand);
    end
end
    
```
## 2ï¸âƒ£.4ï¸âƒ£ `m_Select.m`â€”â€”é€‰æ‹©

```python
function parentPop=m_Select(matrixFitness,pop,SELECTRATE)
%% é€‰æ‹©
% è¾“å…¥ï¼šmatrixFitness--é€‚åº”åº¦çŸ©é˜µ
%      pop--åˆå§‹ç§ç¾¤
%      SELECTRATE--é€‰æ‹©ç‡

sumFitness=sum(matrixFitness(:));%è®¡ç®—æ‰€æœ‰ç§ç¾¤çš„é€‚åº”åº¦

accP=cumsum(matrixFitness/sumFitness);%ç´¯ç§¯æ¦‚ç‡
%è½®ç›˜èµŒé€‰æ‹©ç®—æ³•
for n=1:round(SELECTRATE*size(pop,2))
    matrix=find(accP>rand); %æ‰¾åˆ°æ¯”éšæœºæ•°å¤§çš„ç´¯ç§¯æ¦‚ç‡
    if isempty(matrix)
        continue
    end
    parentPop(:,n)=pop(:,matrix(1));%å°†é¦–ä¸ªæ¯”éšæœºæ•°å¤§çš„ç´¯ç§¯æ¦‚ç‡çš„ä½ç½®çš„ä¸ªä½“é—ä¼ ä¸‹å»
end
end
```
## 2ï¸âƒ£.5ï¸âƒ£ `Crossover.m`â€”â€”äº¤å‰

```python
%% å­å‡½æ•°
%
%é¢˜  ç›®ï¼šCrossover
%
%%
%è¾“   å…¥ï¼š
%           parentsPop       ä¸Šä¸€ä»£ç§ç¾¤
%           NUMPOP           ç§ç¾¤å¤§å°
%           CROSSOVERRATE    äº¤å‰ç‡
%è¾“   å‡ºï¼š
%           kidsPop          ä¸‹ä¸€ä»£ç§ç¾¤
%
%% 
function kidsPop = Crossover(parentsPop,NUMPOP,CROSSOVERRATE)
kidsPop = {[]};n = 1;
while size(kidsPop,2)<NUMPOP-size(parentsPop,2)
    %é€‰æ‹©å‡ºäº¤å‰çš„çˆ¶ä»£å’Œæ¯ä»£
    father = parentsPop{1,ceil((size(parentsPop,2)-1)*rand)+1};
    mother = parentsPop{1,ceil((size(parentsPop,2)-1)*rand)+1};
    %éšæœºäº§ç”Ÿäº¤å‰ä½ç½®
    crossLocation = ceil((length(father)-1)*rand)+1;
    %å¦‚æœéšå³æ•°æ¯”äº¤å‰ç‡ä½ï¼Œå°±æ‚äº¤
    if rand<CROSSOVERRATE
        father(1,crossLocation:end) = mother(1,crossLocation:end);
        kidsPop{n} = father;
        n = n+1;
    end
end
```
## 2ï¸âƒ£.6ï¸âƒ£ `Variation.m`â€”â€”å˜å¼‚

```python
%% å­å‡½æ•°
%
%é¢˜  ç›®ï¼šVariation
%
%
%è¾“   å…¥ï¼š
%           pop              ç§ç¾¤
%           VARIATIONRATE    å˜å¼‚ç‡
%è¾“   å‡ºï¼š
%           pop              å˜å¼‚åçš„ç§ç¾¤
%% 
function kidsPop = Variation(kidsPop,VARIATIONRATE)
for n=1:size(kidsPop,2)
    if rand<VARIATIONRATE
        temp = kidsPop{n};
        %æ‰¾åˆ°å˜å¼‚ä½ç½®
        location = ceil(length(temp)*rand);
        temp = [temp(1:location-1) num2str(~temp(location))...
            temp(location+1:end)];
       kidsPop{n} = temp;
    end
end
```
## 2ï¸âƒ£.7ï¸âƒ£ `m_Coding.m`â€”â€”ç¼–ç 
å› ä¸ºæ€»å…±$35$åº§è½¦ç«™ï¼Œ$a,b,f_1,f_2$éƒ½ä¸è¶…è¿‡$35<2^6$ï¼Œæ‰€ä»¥$4$ä¸ªå‚æ•°éƒ½è®¾ç½®ä¸º$6$ä½äºŒè¿›åˆ¶ï¼Œè¿™æ ·ç¼–ç æ€»é•¿åº¦ä¸º$24$ã€‚
```python
function binPop=m_Coding(pop,pop_length,irange_l)
%% äºŒè¿›åˆ¶ç¼–ç ï¼ˆç”ŸæˆæŸ“è‰²ä½“ï¼‰
% è¾“å…¥ï¼špop--ç§ç¾¤
%      pop_length--ç¼–ç é•¿åº¦
for n=1:size(pop,2) %åˆ—å¾ªç¯
    binPop{n} = '';
    for k=1:size(pop,1) %è¡Œå¾ªç¯
        substr = dec2bin(pop(k,n));
        lengthpop = length(substr);
        for s = 1:6-lengthpop
            substr = ['0' substr];
        end
        binPop{n} = [binPop{n} substr];
    end
end
    
```
## 2ï¸âƒ£.8ï¸âƒ£ `m_Incoding.m`â€”â€”è§£ç 
è§£ç æ—¶ç¼–ç é•¿åº¦ä¸º$24$ï¼Œæ¯éš”$6$ä½è½¬åŒ–æˆåè¿›åˆ¶ã€‚
```python
function pop=m_Incoding(binPop,irange_l)
%% è§£ç 
popNum=1;
popNum = 4;%æŸ“è‰²ä½“åŒ…å«çš„å‚æ•°æ•°é‡
for n=1:size(binPop,2)
    % å› ä¸ºæœ‰35ä¸ªè½¦ç«™ï¼Œ35<2^6 ï¼Œæ‰€ä»¥ç¼–ç ä¸º6ä½
    pop(1,n) = bin2dec(binPop{1,n}(1:6)); 
    pop(2,n) = bin2dec(binPop{1,n}(7:12));
    pop(3,n) = bin2dec(binPop{1,n}(13:18));
    pop(4,n) = bin2dec(binPop{1,n}(19:24));
end
% pop = pop./10^6+irange_l;

```


## 2ï¸âƒ£.9ï¸âƒ£ `m_Fitness.m`â€”â€”é€‚åº”åº¦å‡½æ•°(é‡è¦ï¼Œå®ç°çº¦æŸæ¡ä»¶)
åœ¨è¿™é‡Œå®ç°çº¦æŸæ¡ä»¶ï¼Œæ€è·¯å°±æ˜¯ä¸æ»¡è¶³çº¦æŸæ¡ä»¶çš„ç§ç¾¤çš„é€‚åº”åº¦è®¾ç½®ä¸ºæ— ç©·å°ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€ä»£çš„è¿­ä»£ä¸­å°±ä¼šå°†é€‚åº”åº¦ä½çš„ç§ç¾¤æ·˜æ±°æ‰ï¼Œå®ç°çº¦æŸçš„ç›®çš„ã€‚

```python
function fitness=m_Fitness(pop, OD, h)
%% Fitness Function
for n=1:size(pop,2)
    a = pop(1,n);
    b = pop(2,n);
    f1 = pop(3,n);
    f2 = pop(4,n);
%% çº¦æŸæ¡ä»¶ï¼Œä¸æ»¡è¶³çº¦æŸåˆ™é€‚åº”åº¦å€¼æ— ç©·å°    
 %% 1) a,b,f1,f2 ä¸èƒ½ä¸º0
    if a == 0 || b == 0 || f1 == 0 || f2 == 0
        fitness(n) = 1/1000000000;
        continue;
    end
 %% 2) a,b,f1,f2 ä¸èƒ½è¶…è¿‡35
    if a > 35 || b > 35 || f1 >35 || f2 >35 
         fitness(n) = 1/1000000000;
        continue;
    end
%% 3) åˆ—è½¦æ•°é‡çº¦æŸ
     if (sum(h) * 120 + 1170) *( f1 - 16) + (sum(h(a: b-1)) + (b - a + 1) * 30 + 120) * f2 > 0
        fitness(n) = 1/1000000000;
        continue;
     end
%% 4) æ»¡è½½ç‡çº¦æŸ   
%     constraint2 = [];
%     for j = 2:33
%         constraint2(j) = (sum(sum(OD(1:j, j+1:35)))/(f1+f2)) * (sum(sum(OD(j+1:35,1:j)))/(f1+f2));
%     end
%     if max(constraint2) > 1 * 1460
%         fitness(n) = 1/1000000000;
%         continue;
%     end
%% 5) æœ€å°è¿½è¸ªé—´éš”     
    if f1 + f2 > 30
        fitness(n) = 1/1000000000;
        continue;
    end 
%% 5) æœ€å°å‘è½¦é—´éš”   
    if f1 < 12
          fitness(n) = 1/1000000000;
           continue;
    end
%% ä¸»è¦é€‚åº”åº¦å‡½æ•°ï¼Œè®¾ç½®ä¸ºç›®æ ‡å‡½æ•°çš„å€’æ•°ï¼Œå³ç›®æ ‡å‡½æ•°è¦æ±‚æœ€å°ï¼Œé‚£ä¹ˆè¶Šå°ï¼Œé€‚åº”åº¦å°±è¶Šå¤§    
    fitness(n)= 1/m_Fx(pop(:,n), OD);
end

```

## 2ï¸âƒ£.ğŸ”Ÿ `m_Fx.m`â€”â€”ç›®æ ‡å‡½æ•°(é‡è¦)

```python
function y=m_Fx(x, OD)
%% è¦æ±‚è§£çš„å‡½æ•°
%% Z = Q1 * t1d + Q2 * t2d
    y = (sum(sum(OD)) - sum(sum(OD(x(1):x(2),x(1):x(2))))) * (30/x(3)) + sum(sum(OD(x(1):x(2),x(1):x(2)))) * (30/(x(3)+x(4)));
end
```


# 3ï¸âƒ£ è¿è¡Œç»“æœ

```python
æœ€ä¼˜è§£ï¼š71335.4762åˆ†é’Ÿ
æœ€ä¼˜è§£å¯¹åº”çš„å„å‚æ•°ï¼š4,32,14,4
æœ€å¤§é€‚åº”åº¦ï¼š1.4018e-05
```

å³è®¾ç½®ç¬¬$4$å’Œç¬¬$32$ä¸ªç«™ç‚¹ä¸ºå¤§å°äº¤è·¯æŠ˜è¿”ç«™ï¼Œå¤§äº¤è·¯å‘è½¦é¢‘ç‡ä¸º$14$åˆ—/å°æ—¶ï¼Œå°äº¤è·¯å‘è½¦é¢‘ç‡ä¸º$4$åˆ—/å°æ—¶ï¼Œæœ€ä½å¹³å‡ç­‰å¾…æ—¶é—´ä¸º$71335$åˆ†é’Ÿã€‚

å›¾åƒç»“æœï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200513011016570.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20200513011005955.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0V4Y2FsaWJ1clVsaW1pdGVk,size_16,color_FFFFFF,t_70#pic_center)
